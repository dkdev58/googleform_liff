<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <link rel="stylesheet" href="css/style.css" media="all">
</head>
<body>
    <center>
        <h1>
          กำลังเข้าสู่ form2.html A10
        </h1>
    </center>

    <img id="pictureUrl">
    <p id="userId"><b>userId:</b> </p>
    <p id="displayName"><b>displayName:</b> </p>
    <p id="statusMessage"><b>statusMessage:</b> </p>
    <p id="decodedIDToken"><b>email:</b> </p>
  
  <!-- เพิ่มเติม 1 -->
  
    <p id="userid1"><b>userid1:</b> </p>
    <p id="userid2"><b>userid2:</b> </p>
    <p id="userid3"><b>userid3:</b> </p>


    <script src="https://static.line-scdn.net/liff/edge/2.1/sdk.js"></script>

<script>

      async function getUserProfile() {
      const profile = await liff.getProfile()
      document.getElementById("pictureUrl").src = profile.pictureUrl
      document.getElementById("userId").append(profile.userId)
      document.getElementById("statusMessage").append(profile.statusMessage)
      document.getElementById("displayName").append(profile.displayName)
      document.getElementById("decodedIDToken").append(liff.getDecodedIDToken().email)

      //ทดสอบส่งค่า
      console.log(profile.userId)
      console.log(profile.pictureUrl)
      console.log("ทดสอบ")
      //const userid1 = (profile.userId)
      //console.log(userid1)
      //document.getElementById("userid1").innerHTML="<h2>"+(userid1)+"</h2>"
      document.getElementById("userid1").innerHTML="<h6>userid"+(profile.userId)+"</h6>"
      document.getElementById("userid2").innerHTML="userid_form<input name='userid_form' type='text' value='"+(profile.userId)+"'>"
      document.getElementById("userid3").innerHTML="userid_form hidden <input name='userid_form' type='hidden' value='"+(profile.userId)+"'>"
      //.ทดสอบส่งค่า
    };

    async function main() {
      // alert("LINE Developers x Skooldio")
      
      await liff.init({ liffId: "1660718056-3l4OOLK7" })
      // await liff.init({ liffId: "YOUR-LIFF-ID" })
      document.getElementById("isLoggedIn").append(liff.isLoggedIn())
      if (liff.isLoggedIn()) {
        getEnvironment()
        getUserProfile()
        getContext()
        getFriendship()
      } else {
       // liff.login()
      }

      createUniversalLink()

      //getEnvironment()
      //getUserProfile()
      //getContext()
      //getFriendship()
      // createUniversalLink()
    }
    main()

</script>

  <!-- VConsole -->
  <script src="js/vconsole.min.js"></script>
  <script>
    var vConsole = new VConsole()
    console.log("Hello World!")
    console.log("สวัสดี")
  </script>
  
  <script>
    // Avoid Liff caching for debuging
    document.write('<link rel="stylesheet" href="css/style.css?cache=' + new Date().getTime() + '" media="all">')
  </script>

</body>
</html>


